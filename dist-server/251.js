exports.id=251,exports.ids=[251],exports.modules={2706:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{StocksModule:()=>StocksModule});var common=__webpack_require__(8583),router=__webpack_require__(4419),core=__webpack_require__(7716),ngrx_router_store=__webpack_require__(9667),ngrx_store=__webpack_require__(3065);const selectRouter=(0,ngrx_store.ZF)("router"),{selectCurrentRoute:selectCurrentRoute,selectFragment:selectFragment,selectQueryParams:selectQueryParams,selectQueryParam:selectQueryParam,selectRouteParams:selectRouteParams,selectRouteParam:selectRouteParam,selectRouteData:selectRouteData,selectUrl:selectUrl}=(0,ngrx_router_store.Ug)(selectRouter),selectParamTicker=selectRouteParam("ticker"),fetchStocks=(0,ngrx_store.PH)("[STOCKS] Fetch stocks"),fetchStocksSucces=(0,ngrx_store.PH)("[STOCKS] Fetch stocks success",(0,ngrx_store.Ky)()),fetchStocksHistorySuccess=(0,ngrx_store.PH)("[STOCKS] Fetch stocks history success",(0,ngrx_store.Ky)()),stocksReducer=(0,ngrx_store.Lq)({stocks:[],stocksHistory:{}},(0,ngrx_store.on)(fetchStocksSucces,(state,{stocks:stocks})=>({...state,stocks:stocks})),(0,ngrx_store.on)(fetchStocksHistorySuccess,(state,{stocks:stocks})=>{const newHistory={...state.stocksHistory};return stocks.forEach(stock=>{if(newHistory[stock.ticker]){const history=newHistory[stock.ticker];newHistory[stock.ticker]=[...history,stock]}else newHistory[stock.ticker]=[stock]}),{...state,stocksHistory:newHistory}})),selectFeature=(0,ngrx_store.ZF)("stocks"),selectFeatureStock=(0,ngrx_store.P1)(selectFeature,state=>state.stocks),selectFeatureStockHistory=(0,ngrx_store.P1)(selectFeature,state=>state.stocksHistory);var withLatestFrom=__webpack_require__(7057),filter=__webpack_require__(5435),map=__webpack_require__(8002),ng2_charts=__webpack_require__(3184);const _c0=function(){return[]};class StocksItemComponent{constructor(store$,datePipe,_platformId){this.store$=store$,this.datePipe=datePipe,this._platformId=_platformId,this.routerParam$=this.store$.select(selectParamTicker),this.history$=this.store$.select(selectFeatureStockHistory).pipe((0,withLatestFrom.M)(this.routerParam$)).pipe((0,filter.h)(([history,routerParam])=>Boolean(history)&&Boolean(routerParam)),(0,map.U)(([history,routerParam])=>history[routerParam].slice(-10))),this.lineChartData$=this.history$.pipe((0,filter.h)(()=>(0,common.NF)(this._platformId)),(0,map.U)(historyArray=>[{data:historyArray.map(historyItem=>historyItem.price),label:historyArray.map(historyItem=>historyItem.ticker).slice(0)[0]}])),this.lineChartLabels$=this.history$.pipe((0,map.U)(historyArray=>historyArray.map(historyItem=>this.datePipe.transform(historyItem.last_trade_time,"h:mm:ss a")))),this.lineChartColors=[{borderColor:"black",backgroundColor:"rgba(255,255,0,0.28)"}],this.lineChartOptions={responsive:!0,animation:{duration:0}}}}StocksItemComponent.\u0275fac=function StocksItemComponent_Factory(t){return new(t||StocksItemComponent)(core.Y36(ngrx_store.yh),core.Y36(common.uU),core.Y36(core.Lbi))},StocksItemComponent.\u0275cmp=core.Xpm({type:StocksItemComponent,selectors:[["app-stocks-item"]],decls:8,vars:14,consts:[[1,"container"],[1,"chart-wrapper"],["baseChart","","chartType","line",3,"datasets","labels","options","colors","legend","plugins"]],template:function StocksItemComponent_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.TgZ(1,"h1"),core._uU(2),core.ALo(3,"async"),core.qZA(),core.TgZ(4,"div",1),core._UZ(5,"canvas",2),core.ALo(6,"async"),core.ALo(7,"async"),core.qZA(),core.qZA()),2&rf&&(core.xp6(2),core.hij("Statistic: ",core.lcZ(3,7,ctx.routerParam$),""),core.xp6(3),core.Q6J("datasets",core.lcZ(6,9,ctx.lineChartData$))("labels",core.lcZ(7,11,ctx.lineChartLabels$))("options",ctx.lineChartOptions)("colors",ctx.lineChartColors)("legend",!0)("plugins",core.DdM(13,_c0)))},directives:[ng2_charts.jh],pipes:[common.Ov],styles:[".container[_ngcontent-%COMP%]{margin:0 20%;color:#f0fff0;background-color:#ffff0047}"],changeDetection:0});var fesm2015_forms=__webpack_require__(3679),Observable=__webpack_require__(7574),combineLatest=__webpack_require__(9112),startWith=__webpack_require__(9761),icon=__webpack_require__(6627),progress_spinner=__webpack_require__(4885);function StocksComponent_div_0_div_2_div_8_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core.TgZ(1,"span",13),core.TgZ(2,"mat-icon",14),core._uU(3," arrow_upward "),core.qZA(),core.qZA(),core.qZA())}function StocksComponent_div_0_div_2_ng_template_9_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",15),core.TgZ(1,"mat-icon",14),core._uU(2," arrow_downward "),core.qZA(),core.qZA())}function StocksComponent_div_0_div_2_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"div",7),core.NdJ("click",function StocksComponent_div_0_div_2_Template_div_click_0_listener(){const stock_r6=core.CHM(_r11).$implicit;return core.oxw(2).navigateToStockDesecription(stock_r6.ticker)}),core.TgZ(1,"span",8),core._uU(2),core.qZA(),core.TgZ(3,"span",9),core._uU(4),core.qZA(),core.TgZ(5,"span",10),core._uU(6),core.ALo(7,"date"),core.qZA(),core.YNc(8,StocksComponent_div_0_div_2_div_8_Template,4,0,"div",11),core.YNc(9,StocksComponent_div_0_div_2_ng_template_9_Template,3,0,"ng-template",null,12,core.W1O),core.qZA()}if(2&rf){const stock_r6=ctx.$implicit,_r8=core.MAs(10);core.xp6(2),core.hij("Ticker: ",stock_r6.ticker,""),core.xp6(2),core.hij("Price: ",stock_r6.price,""),core.xp6(2),core.hij("Last change: ",core.xi3(7,5,stock_r6.last_trade_time,"dd:MM:yyyy, HH:mm:ss"),""),core.xp6(2),core.Q6J("ngIf",stock_r6.yield>1)("ngIfElse",_r8)}}function StocksComponent_div_0_li_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"li",16),core.TgZ(1,"label"),core._UZ(2,"input",17),core.TgZ(3,"span",18),core._uU(4),core.qZA(),core.qZA(),core.qZA()),2&rf){const switcher_r12=ctx.$implicit;core.xp6(2),core.Q6J("formControlName",switcher_r12.ticker),core.xp6(2),core.Oqu(switcher_r12.ticker)}}function StocksComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2),core.TgZ(1,"div",3),core.YNc(2,StocksComponent_div_0_div_2_Template,11,8,"div",4),core.qZA(),core.TgZ(3,"div",5),core.TgZ(4,"ul"),core.YNc(5,StocksComponent_div_0_li_5_Template,5,2,"li",6),core.qZA(),core.qZA(),core.qZA()),2&rf){const stocks_r3=ctx.ngIf,ctx_r0=core.oxw();core.xp6(2),core.Q6J("ngForOf",stocks_r3),core.xp6(1),core.Q6J("formGroup",ctx_r0.form),core.xp6(2),core.Q6J("ngForOf",ctx_r0.switchers)}}function StocksComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core._UZ(1,"mat-spinner",19),core.qZA())}class StocksComponent{constructor(fb,router,store$,route){this.fb=fb,this.router=router,this.store$=store$,this.route=route,this.form=new fesm2015_forms.cw({}),this.stocks$=new Observable.y,this.switchers=[{ticker:"AAPL",checked:!0},{ticker:"GOOGL",checked:!0},{ticker:"MSFT",checked:!0},{ticker:"AMZN",checked:!0},{ticker:"FB",checked:!0},{ticker:"TSLA",checked:!0}],this._formInitialize()}ngOnInit(){this.stocks$=(0,combineLatest.aj)([this.store$.select(selectFeatureStock),this.form.valueChanges.pipe((0,startWith.O)(this.form.value))]).pipe((0,map.U)(([stocks,switcherForm])=>stocks.filter(stock=>switcherForm[stock.ticker])))}navigateToStockDesecription(ticker){this.router.navigate([ticker],{relativeTo:this.route})}_formInitialize(){this.form=this.fb.group(this.switchers.reduce((group,switcher)=>({...group,[switcher.ticker]:[switcher.checked]}),{}))}}StocksComponent.\u0275fac=function StocksComponent_Factory(t){return new(t||StocksComponent)(core.Y36(fesm2015_forms.qu),core.Y36(router.F0),core.Y36(ngrx_store.yh),core.Y36(router.gz))},StocksComponent.\u0275cmp=core.Xpm({type:StocksComponent,selectors:[["app-stocks"]],decls:4,vars:4,consts:[["class","content",4,"ngIf","ngIfElse"],["loading",""],[1,"content"],[1,"stocks-wrap"],["class","stock-wrap__stock-item",3,"click",4,"ngFor","ngForOf"],[1,"switchers",3,"formGroup"],["class","switchers__item",4,"ngFor","ngForOf"],[1,"stock-wrap__stock-item",3,"click"],[1,"stock-wrap__name"],[1,"stock-wrap__price"],[1,"stock-wrap__date"],[4,"ngIf","ngIfElse"],["arrowDown",""],[1,"stock-wrap__arrowUp"],["aria-hidden","false","aria-label","Example home icon"],[1,"stock-wrap__arrowDown"],[1,"switchers__item"],["type","checkbox",3,"formControlName"],[1,"switchers__label"],[1,"loader"]],template:function StocksComponent_Template(rf,ctx){if(1&rf&&(core.YNc(0,StocksComponent_div_0_Template,6,3,"div",0),core.ALo(1,"async"),core.YNc(2,StocksComponent_ng_template_2_Template,2,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",core.lcZ(1,2,ctx.stocks$))("ngIfElse",_r1)}},directives:[common.O5,common.sg,fesm2015_forms.JL,fesm2015_forms.sg,icon.Hw,fesm2015_forms.Wl,fesm2015_forms.JJ,fesm2015_forms.u,progress_spinner.$g],pipes:[common.Ov,common.uU],styles:[".content[_ngcontent-%COMP%]{margin:20px 20% 0;display:flex;align-items:flex-start;justify-content:space-between}.stocks-wrap[_ngcontent-%COMP%]{width:800px;display:flex;flex-direction:column}.stock-wrap__stock-item[_ngcontent-%COMP%]{color:#f0fff0;background-color:#555454;border-radius:8px;border:1px solid #555454;padding:10px;display:flex;justify-content:space-between;flex-basis:auto}.stock-wrap__stock-item[_ngcontent-%COMP%]:hover{background-color:#999c7966}.stock-wrap__stock-item[_ngcontent-%COMP%]:active{background-color:#4d4e3d66}.stock-wrap__stock-item[_ngcontent-%COMP%] + .stock-wrap__stock-item[_ngcontent-%COMP%]{margin-top:10px}.stock-wrap__arrowDown[_ngcontent-%COMP%]{color:#e70f0f}.stock-wrap__arrowUp[_ngcontent-%COMP%]{color:#13ac13}.switchers[_ngcontent-%COMP%]{flex-grow:1;padding:30px;background-color:#555454;margin-left:10px;border-radius:8px}.switchers__item[_ngcontent-%COMP%]{color:#f0fff0;list-style:none;font-size:1.6rem}.switchers__item[_ngcontent-%COMP%] + .switchers__item[_ngcontent-%COMP%]{margin-top:15px}.switchers__label[_ngcontent-%COMP%]{padding-left:10px}.loader[_ngcontent-%COMP%]{margin:auto}"]});const routes=[{path:"",component:StocksComponent},{path:":ticker",component:StocksItemComponent}];class StocksRoutingModule{}StocksRoutingModule.\u0275fac=function StocksRoutingModule_Factory(t){return new(t||StocksRoutingModule)},StocksRoutingModule.\u0275mod=core.oAB({type:StocksRoutingModule}),StocksRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});var ngrx_effects=__webpack_require__(1601),tap=__webpack_require__(3342),mergeMap=__webpack_require__(1249),switchMap=__webpack_require__(3190),wrapper=__webpack_require__(9605);class SocketService{constructor(_platformId){this._platformId=_platformId,(0,common.NF)(this._platformId)&&(this.socket=(0,wrapper.io)("https://stocks-socket-server.herokuapp.com/"))}startSending(){this.socket.emit("start")}getStocks(){return new Observable.y(observer=>{this.socket.on("ticker",tickers=>observer.next(tickers))})}}SocketService.\u0275fac=function SocketService_Factory(t){return new(t||SocketService)(core.LFG(core.Lbi))},SocketService.\u0275prov=core.Yz7({token:SocketService,factory:SocketService.\u0275fac,providedIn:"root"});class StockEffects{constructor(actions$,_platformId,socketService){this.actions$=actions$,this._platformId=_platformId,this.socketService=socketService,this.fetchStocks$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(fetchStocks),(0,filter.h)(()=>(0,common.NF)(this._platformId)),(0,tap.b)(()=>this.socketService.startSending()),(0,mergeMap.zg)(()=>this.socketService.getStocks().pipe((0,switchMap.w)(stocks=>[fetchStocksSucces({stocks:stocks}),fetchStocksHistorySuccess({stocks:stocks})])))))}ngrxOnInitEffects(){return fetchStocks()}}StockEffects.\u0275fac=function StockEffects_Factory(t){return new(t||StockEffects)(core.LFG(ngrx_effects.eX),core.LFG(core.Lbi),core.LFG(SocketService))},StockEffects.\u0275prov=core.Yz7({token:StockEffects,factory:StockEffects.\u0275fac});class StocksModule{}StocksModule.\u0275fac=function StocksModule_Factory(t){return new(t||StocksModule)},StocksModule.\u0275mod=core.oAB({type:StocksModule}),StocksModule.\u0275inj=core.cJS({providers:[common.uU],imports:[[common.ez,StocksRoutingModule,icon.Ps,progress_spinner.Cq,fesm2015_forms.u5,fesm2015_forms.UX,ngrx_store.Aw.forFeature("stocks",stocksReducer),ngrx_effects.sQ.forFeature([StockEffects]),ng2_charts.m9]]})},6700:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./af":6431,"./af.js":6431,"./ar":1286,"./ar-dz":1616,"./ar-dz.js":1616,"./ar-kw":9759,"./ar-kw.js":9759,"./ar-ly":3160,"./ar-ly.js":3160,"./ar-ma":2551,"./ar-ma.js":2551,"./ar-sa":30,"./ar-sa.js":30,"./ar-tn":6962,"./ar-tn.js":6962,"./ar.js":1286,"./az":5887,"./az.js":5887,"./be":4572,"./be.js":4572,"./bg":3276,"./bg.js":3276,"./bm":3344,"./bm.js":3344,"./bn":8985,"./bn-bd":3990,"./bn-bd.js":3990,"./bn.js":8985,"./bo":4391,"./bo.js":4391,"./br":6728,"./br.js":6728,"./bs":5536,"./bs.js":5536,"./ca":1043,"./ca.js":1043,"./cs":420,"./cs.js":420,"./cv":3513,"./cv.js":3513,"./cy":6771,"./cy.js":6771,"./da":7978,"./da.js":7978,"./de":6061,"./de-at":5204,"./de-at.js":5204,"./de-ch":2653,"./de-ch.js":2653,"./de.js":6061,"./dv":85,"./dv.js":85,"./el":8579,"./el.js":8579,"./en-au":5724,"./en-au.js":5724,"./en-ca":525,"./en-ca.js":525,"./en-gb":2847,"./en-gb.js":2847,"./en-ie":7216,"./en-ie.js":7216,"./en-il":9305,"./en-il.js":9305,"./en-in":3364,"./en-in.js":3364,"./en-nz":9130,"./en-nz.js":9130,"./en-sg":1161,"./en-sg.js":1161,"./eo":802,"./eo.js":802,"./es":328,"./es-do":5551,"./es-do.js":5551,"./es-mx":5615,"./es-mx.js":5615,"./es-us":4790,"./es-us.js":4790,"./es.js":328,"./et":6389,"./et.js":6389,"./eu":8657,"./eu.js":8657,"./fa":6151,"./fa.js":6151,"./fi":7997,"./fi.js":7997,"./fil":8898,"./fil.js":8898,"./fo":7779,"./fo.js":7779,"./fr":8174,"./fr-ca":3287,"./fr-ca.js":3287,"./fr-ch":8867,"./fr-ch.js":8867,"./fr.js":8174,"./fy":452,"./fy.js":452,"./ga":5014,"./ga.js":5014,"./gd":4127,"./gd.js":4127,"./gl":2124,"./gl.js":2124,"./gom-deva":6444,"./gom-deva.js":6444,"./gom-latn":7953,"./gom-latn.js":7953,"./gu":6604,"./gu.js":6604,"./he":1222,"./he.js":1222,"./hi":4235,"./hi.js":4235,"./hr":622,"./hr.js":622,"./hu":7735,"./hu.js":7735,"./hy-am":402,"./hy-am.js":402,"./id":9187,"./id.js":9187,"./is":536,"./is.js":536,"./it":5007,"./it-ch":4667,"./it-ch.js":4667,"./it.js":5007,"./ja":2093,"./ja.js":2093,"./jv":59,"./jv.js":59,"./ka":6870,"./ka.js":6870,"./kk":880,"./kk.js":880,"./km":1083,"./km.js":1083,"./kn":8785,"./kn.js":8785,"./ko":1721,"./ko.js":1721,"./ku":7851,"./ku.js":7851,"./ky":1727,"./ky.js":1727,"./lb":346,"./lb.js":346,"./lo":3002,"./lo.js":3002,"./lt":4035,"./lt.js":4035,"./lv":6927,"./lv.js":6927,"./me":5634,"./me.js":5634,"./mi":4173,"./mi.js":4173,"./mk":6320,"./mk.js":6320,"./ml":1705,"./ml.js":1705,"./mn":1062,"./mn.js":1062,"./mr":2805,"./mr.js":2805,"./ms":1341,"./ms-my":9900,"./ms-my.js":9900,"./ms.js":1341,"./mt":7734,"./mt.js":7734,"./my":9034,"./my.js":9034,"./nb":9324,"./nb.js":9324,"./ne":6495,"./ne.js":6495,"./nl":673,"./nl-be":6272,"./nl-be.js":6272,"./nl.js":673,"./nn":2486,"./nn.js":2486,"./oc-lnc":6219,"./oc-lnc.js":6219,"./pa-in":2829,"./pa-in.js":2829,"./pl":8444,"./pl.js":8444,"./pt":3170,"./pt-br":6117,"./pt-br.js":6117,"./pt.js":3170,"./ro":6587,"./ro.js":6587,"./ru":9264,"./ru.js":9264,"./sd":2135,"./sd.js":2135,"./se":5366,"./se.js":5366,"./si":3379,"./si.js":3379,"./sk":6143,"./sk.js":6143,"./sl":196,"./sl.js":196,"./sq":1082,"./sq.js":1082,"./sr":1621,"./sr-cyrl":8963,"./sr-cyrl.js":8963,"./sr.js":1621,"./ss":1404,"./ss.js":1404,"./sv":5685,"./sv.js":5685,"./sw":3872,"./sw.js":3872,"./ta":4106,"./ta.js":4106,"./te":9204,"./te.js":9204,"./tet":3692,"./tet.js":3692,"./tg":6361,"./tg.js":6361,"./th":1735,"./th.js":1735,"./tk":1568,"./tk.js":1568,"./tl-ph":6129,"./tl-ph.js":6129,"./tlh":3759,"./tlh.js":3759,"./tr":1644,"./tr.js":1644,"./tzl":875,"./tzl.js":875,"./tzm":6878,"./tzm-latn":1041,"./tzm-latn.js":1041,"./tzm.js":6878,"./ug-cn":4357,"./ug-cn.js":4357,"./uk":4810,"./uk.js":4810,"./ur":6794,"./ur.js":6794,"./uz":8966,"./uz-latn":7959,"./uz-latn.js":7959,"./uz.js":8966,"./vi":5386,"./vi.js":5386,"./x-pseudo":3156,"./x-pseudo.js":3156,"./yo":8028,"./yo.js":8028,"./zh-cn":9330,"./zh-cn.js":9330,"./zh-hk":9380,"./zh-hk.js":9380,"./zh-mo":874,"./zh-mo.js":874,"./zh-tw":6508,"./zh-tw.js":6508};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=6700}};